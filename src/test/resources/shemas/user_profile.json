{
  "schema": "http://json-schema.org/draft-07/schema#", "title": "User Profile", "description": "Сложная схема для примера пользователя с разными типами и валидациями", "type": "object", "properties": { "id": { "type": "string", "pattern": "^[a-f0-9]{24}",
  "description": "Уникальный идентификатор в формате hex (24 символа)"
},
  "name": {
    "type": "object",
    "properties": {
      "first": { "type": "string", "minLength": 1 },
      "middle": { "type": ["string", "null"], "maxLength": 50 },
      "last": { "type": "string", "minLength": 1 }
    },
    "required": ["first", "last"],
    "additionalProperties": false
  },
  "email": {
    "type": "string",
    "format": "email"
  },
  "age": {
    "type": "integer",
    "minimum": 0,
    "maximum": 130,
    "description": "Возраст пользователя"
  },
  "roles": {
    "type": "array",
    "items": {
      "type": "string",
      "enum": ["user", "admin", "moderator", "guest"]
    },
    "minItems": 1,
    "uniqueItems": true
  },
  "preferences": {
    "type": "object",
    "properties": {
      "newsletter": { "type": "boolean", "default": false },
      "notifications": {
        "type": "object",
        "properties": {
          "email": { "type": "boolean" },
          "sms": { "type": "boolean" },
          "push": { "type": "boolean" }
        },
        "required": ["email", "sms", "push"],
        "additionalProperties": false
      }
    },
    "required": ["newsletter", "notifications"],
    "additionalProperties": false
  },
  "address": {
    "oneOf": [
      {
        "type": "object",
        "properties": {
          "type": { "const": "home" },
          "street": { "type": "string" },
          "city": { "type": "string" },
          "postalCode": { "type": "string", "pattern": "^\\d-\\d{4}?" }
        },
        "required": ["type", "street", "city", "postalCode"],
        "additionalProperties": false
      },
      {
        "type": "object",
        "properties": {
          "type": { "const": "work" },
          "company": { "type": "string" },
          "street": { "type": "string" },
          "city": { "type": "string" },
          "postalCode": { "type": "string", "pattern": "^\\d{5}(-\\d{4})?" }
        },
        "required": ["type", "company", "street", "city", "postalCode"],
        "additionalProperties": false
      }
    ]
  },
  "metadata": {
    "type": "object",
    "description": "Дополнительные данные",
    "allOf": [
      {
        "properties": {
          "createdAt": { "type": "string", "format": "date-time" },
          "updatedAt": { "type": "string", "format": "date-time" }
        },
        "required": ["createdAt"]
      },
      {
        "properties": {
          "tags": {
            "type": "array",
            "items": { "type": "string" }
          }
        }
      }
    ],
    "additionalProperties": true
  }
},
  "required": ["id", "name", "email", "roles", "preferences"],
  "additionalProperties": false
}